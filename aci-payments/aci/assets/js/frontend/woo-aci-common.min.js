!function(e,t){t.aci={},aci.Gateway=function(){t.ignite.Gateway.call(this)},aci.Gateway.prototype=e.extend({},t.ignite.Gateway.prototype),aci.Gateway.prototype.unload_widget=function(){void 0!==t.wpwl&&void 0!==t.wpwl.unload&&(t.wpwl.unload(),e("script").each((function(){-1!==this.src.indexOf("static.min.js")&&e(this).remove(),-1!==this.src.indexOf("paymentWidgets.js")&&e(this).remove()})))},aci.Gateway.prototype.load_aci_script=function(t,o,r,a){e(t).append(`<script src="${o}/v1/paymentWidgets.js?checkoutId=${r}" integrity="${a}" crossorigin="anonymous" ><\/script>`)},aci.Gateway.prototype.load_aci_from=function(t,o,r){e(t).append(`<form action="${o}" class="paymentWidgets" data-brands="${r}"></form>`)},aci.Gateway.prototype.ajax_call=function(t,o,r=!1){let a="";a="0"!==t.admin_checkout_order_id?"#payment":".woocommerce-checkout-payment",this.block(a);let i={};!0===r&&(i={async:!1}),e.ajax(e.extend({},{type:"POST",context:this,url:t.ajax_url,data:o,success(e){this.unblock(a);"woo_aci_draft"!==new URLSearchParams(o).get("id")?this.bind_success_ajax_handler(e):t.response=e},error(e){this.unblock(a),this.bind_error_ajax_handler(e)}},i))},aci.Gateway.prototype.bind_error_ajax_handler=function(e){this.error_handler(wp.i18n.__("We are currently unable to process your payment. Please try again","woocommerce"))},aci.Gateway.prototype.hide_place_order_button=function(){e("#place_order").hide()},aci.Gateway.prototype.show_place_order_button=function(){e("#place_order").show()},aci.Gateway.prototype.show_errors=function(t){if(!0===t.refresh&&e(document.body).trigger("update_checkout"),t.messages){let o=e("form.checkout");o.length||(o=e("form#order_review")),e(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message, .is-error, .is-success").remove(),o.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+t.messages+"</div>");let r=e(".woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout");r.length||(r=o),e.scroll_to_notices(r)}},aci.Gateway.prototype.get_url_value_by_key=function(e,t){return new URL(e).searchParams.get(t)},aci.Gateway.prototype.create_draft_order_or_update_order=function(o,r){const a=e.param(r);let i="";if("0"!==o.admin_checkout_order_id){const o=e("form#order_review").serialize(),r={key:this.get_url_value_by_key(t.location.href,"key")};i=`${o}&${a}&${e.param(r)}`}else{i=`${e("form.checkout").serialize()}&${a}`}this.ajax_call(o,i,!0)},aci.Gateway.prototype.init_wpwl_events=function(o){const r="function"==typeof t.wpwlOptions.onBeforeSubmitCard?t.wpwlOptions.onBeforeSubmitCard:null;t.wpwlOptions.onBeforeSubmitCard=function(e){if(r){if(!1===r.call(this,e))return!1}return this.on_click_pay_now_event_handler(e)}.bind(this);const a="function"==typeof t.wpwlOptions.onBeforeSubmitOneClickCard?t.wpwlOptions.onBeforeSubmitOneClickCard:null;t.wpwlOptions.onBeforeSubmitOneClickCard=function(e){if(a){if(!1===a.call(this,e))return!1}return this.on_click_pay_now_event_handler(e)}.bind(this),e(o).off("click").on("click","button.wpwl-button:submit",(function(o){o.preventDefault();const r=e(this).closest("form.wpwl-form").parent("div.wpwl-container");if(r&&r.length){const o=e(r).attr("class");t.wpwl.executePayment(o.trim().replace(/\s/g,"."))}}))}}(jQuery,window);