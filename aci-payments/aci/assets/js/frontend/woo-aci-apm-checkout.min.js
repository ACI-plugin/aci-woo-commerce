!function(o,e){function t(){aci.Gateway.call(this),this.check_device_callback_handler(),this.check_device(),this.bind_updated_checkout_event(),"0"!==woo_aci_apm_obj.admin_checkout_order_id&&this.bind_payment_method_selected_event()}t.prototype=o.extend({},aci.Gateway.prototype),t.prototype.bind_payment_method_selected_event_handler=function(o){this.show_place_order_button(),woo_aci_apm_obj.payment_key[this.selected_gateway()]&&(woo_aci_apm_obj.payment_id=this.selected_gateway(),this.ajax_call(woo_aci_apm_obj,{action:woo_aci_apm_obj.action,nonce:woo_aci_apm_obj.nonce,id:woo_aci_apm_obj.id,payment_key:woo_aci_apm_obj.payment_key[woo_aci_apm_obj.payment_id],admin_checkout_order_id:woo_aci_apm_obj.hasOwnProperty("admin_checkout_order_id")?woo_aci_apm_obj.admin_checkout_order_id:""}),null!=o&&o.stopImmediatePropagation())},t.prototype.check_device=function(){o(document.body).on("updated_checkout",this.check_device_callback_handler.bind(this))},t.prototype.check_device_callback_handler=function(o){const e=document.querySelector('input[value="woo_aci_APPLEPAY"]');if(e){const o=e.closest("li");o&&(window.ApplePaySession&&window.ApplePaySession.canMakePayments()?o.style.display="show":o.style.display="none")}},t.prototype.bind_success_ajax_handler=function(e){try{if((e=JSON.parse(e)).id){this.hide_place_order_button(),this.unload_widget(),this.checkout_id=e.id,o(".payment_box.payment_method_"+woo_aci_apm_obj.payment_id).html(""),this.load_aci_script(".payment_box.payment_method_"+woo_aci_apm_obj.payment_id,woo_aci_apm_obj.end_point,e.id,e.integrity);const t=woo_aci_apm_obj.payment_key[woo_aci_apm_obj.payment_id];if(this.load_aci_from(".payment_box.payment_method_"+woo_aci_apm_obj.payment_id,woo_aci_apm_obj.shopper_result_url,t),"object"!=typeof window.wpwlOptions&&(window.wpwlOptions={}),woo_aci_apm_obj.custom_js_code){new Function("window",`\n\t\t\t\t\t\t${woo_aci_apm_obj.custom_js_code}\n\t\t\t\t\t\t`)(window)}if(window.wpwlOptions.googlePay=Object.assign({buttonColor:"white",buttonType:"pay",buttonSizeMode:"fill"},window.wpwlOptions.googlePay||{}),window.wpwlOptions.googlePay){const o="function"==typeof window.wpwlOptions.googlePay.onCancel?window.wpwlOptions.googlePay.onCancel:null;window.wpwlOptions.googlePay.onCancel=function(e){o&&o.call(this,e),this.bind_payment_method_selected_event_handler()}.bind(this)}if(window.ApplePaySession&&window.ApplePaySession.canMakePayments()&&window.wpwlOptions.applePay){const o="function"==typeof window.wpwlOptions.applePay.onCancel?window.wpwlOptions.applePay.onCancel:null;window.wpwlOptions.applePay.onCancel=function(e){o&&o.call(this,e),this.bind_payment_method_selected_event_handler()}.bind(this)}if(window.wpwlOptions.paypal){const o="function"==typeof window.wpwlOptions.paypal.onApprove?window.wpwlOptions.paypal.onApprove:null;window.wpwlOptions.paypal.onApprove=function(e){return o&&o.call(this,e),this.on_click_pay_now_event_handler(e)}.bind(this)}const n="function"==typeof window.wpwlOptions.onBeforeSubmitVirtualAccount?window.wpwlOptions.onBeforeSubmitVirtualAccount:null;window.wpwlOptions.onBeforeSubmitVirtualAccount=function(o){if(n){if(!1===n.call(this,o))return!1}return this.on_click_pay_now_event_handler()}.bind(this),this.init_wpwl_events(".payment_box.payment_method_"+woo_aci_apm_obj.payment_id)}else this.error_handler(wp.i18n.__("We are currently unable to process your payment. Please try again","woocommerce"))}catch(o){this.error_handler(wp.i18n.__("We are currently unable to process your payment. Please try again","woocommerce"))}},t.prototype.on_click_pay_now_event_handler=function(o){if(woo_aci_apm_obj.payment_key[this.selected_gateway()]){const o={action:woo_aci_apm_obj.action,nonce:woo_aci_apm_obj.nonce,id:"woo_aci_draft",checkout_id:this.checkout_id,admin_checkout_order_id:woo_aci_apm_obj.admin_checkout_order_id};return this.create_draft_order_or_update_order(woo_aci_apm_obj,o),"success"===woo_aci_apm_obj.response.result?!0:(this.show_errors(woo_aci_apm_obj.response),!1)}},t.prototype.error_handler=function(e){o(`.payment_box.payment_method_${woo_aci_apm_obj.payment_id}`).html(""),o(`.payment_box.payment_method_${woo_aci_apm_obj.payment_id}`).prepend('<div class="woocommerce-error" id="'+woo_aci_apm_obj.payment_id+'_error">'+e+"</div>")},o(document).ready((function(){new t}))}(jQuery,window.ignite);