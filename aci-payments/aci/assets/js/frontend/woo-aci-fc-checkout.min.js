!function(t,o){o.acifc={},acifc.init=function(){acifc.init_minicart_fc_widget(),acifc.init_fc_widget(),t(document.body).on("updated_cart_totals",this.reload_fc_widget.bind(this))},acifc.init_minicart_fc_widget=function(){t(document.body).on("click",".wc-block-mini-cart__button",(function(){setTimeout((()=>{!function(){if(acifc.aci_loader_block(),!t("body .fc-miniart").length){const o=t('<div  class="fc-script-div"></div>'),e=t('<div class="fc-miniart"><div class="gpay-div fc-miniart-button"></div><div class="applepay-div fc-miniart-button"></div></div>');t("body .wc-block-mini-cart__footer-actions").before(o,e)}const o=document.querySelector(".wc-block-mini-cart__template-part");if(o){acifc.reload_fc_widget();const t=o.querySelector(".wc-block-mini-cart__footer-subtotal");if(t){new MutationObserver((function(o){for(const e of o)if("characterData"===e.type){acifc.aci_loader_block();const o=t.querySelector(".wc-block-components-totals-item__value").textContent;console.log("Subtotal character data updated to:",o),acifc.reload_fc_widget()}})).observe(t,{childList:!0,subtree:!0,characterData:!0})}}}()}),2e3)}))},acifc.aci_loader_block=function(){const o=t("body .wc-block-mini-cart__footer-subtotal"),e=t("body .fc-miniart");o.length>0&&(o.css({position:"relative",background:"#fff",opacity:"0.6"}),e.length>0&&e.css({position:"relative",background:"#fff",opacity:"0.6","pointer-events":"none"}),o.append('\n\t\t\t\t<div class="wc-custom-loader" style="\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 50%;\n\t\t\t\t\tleft: 50%;\n\t\t\t\t\ttransform: translate(-50%, -50%);\n\t\t\t\t\tz-index: 1000;\n\t\t\t\t">\n\t\t\t\t\t<img src="/wp-content/plugins/woocommerce/assets/images/icons/loader.svg" alt="Loading..." style="\n\t\t\t\t\t\twidth: 30px;\n\t\t\t\t\t\theight: 30px;\n\t\t\t\t\t\tanimation: spin 1s linear infinite;\n\t\t\t\t\t">\n\t\t\t\t</div>\n\t\t\t'))},acifc.aci_loader_unblock=function(){const o=t("body .wc-block-mini-cart__footer-subtotal"),e=t("body .fc-miniart");o.length>0&&(t("body .wc-block-mini-cart__footer-subtotal .wc-custom-loader").remove(),o.css({background:"",opacity:"1",position:"initial"}),e.css({background:"",opacity:"1","pointer-events":"auto",position:"initial"}))},acifc.reload_fc_widget=function(){t.post(woo_aci_fc_obj.ajax_url,{action:woo_aci_fc_obj.action,nonce:woo_aci_fc_obj.nonce,id:"woo_aci_fc_cart"}).then((function(t){woo_aci_fc_obj=t,acifc.reload_minicart_fc_widget(),acifc.init_fc_widget()})).always((function(){acifc.aci_loader_unblock()}))},acifc.reload_minicart_fc_widget=function(){t("body .fc-script-div").length>0&&(t("body .fc-script-div").html('<script src="'+woo_aci_fc_obj.end_point+'/v1/paymentWidgets.js" integrity="'+woo_aci_fc_obj.integrity+'" crossorigin="anonymous"><\/script>'),woo_aci_fc_obj.gpay_enabled&&t("body .gpay-div").html('<form action="'+woo_aci_fc_obj.shopper_result_url+'" class="paymentWidgets" data-brands="GOOGLEPAY"></form>'),woo_aci_fc_obj.applepay_enabled&&t("body .applepay-div").html('<form action="'+woo_aci_fc_obj.shopper_result_url+'" class="paymentWidgets" data-brands="APPLEPAY"></form>'))},acifc.load_fc_script=function(){const t=document.createElement("script");t.src=woo_aci_fc_obj.end_point+"/v1/paymentWidgets.js",t.integrity=woo_aci_fc_obj.integrity,t.crossOrigin="anonymous",document.head.appendChild(t)},acifc.unload_fc_script=function(){void 0!==o.wpwl&&void 0!==o.wpwl.unload&&(o.wpwl.unload(),t("script").each((function(){-1!==this.src.indexOf("static.min.js")&&t(this).remove(),-1!==this.src.indexOf("paymentWidgets.js")&&t(this).remove()})))},acifc.get_gpay_paymentdata_error=function(t,o){var e={};return"authResp"===o&&(e.transactionState="ERROR"),e.error={reason:t.error_code,message:t.message,intent:t.intent},e},acifc.get_gpay_new_paymentdata=function(){var t={newTransactionInfo:{currencyCode:woo_aci_fc_obj.currency,totalPriceStatus:"FINAL",totalPrice:woo_aci_fc_obj.total,totalPriceLabel:"Total",checkoutOption:"COMPLETE_IMMEDIATE_PURCHASE",displayItems:[{label:"Subtotal",type:"SUBTOTAL",price:woo_aci_fc_obj.subtotal},{label:"Tax",type:"TAX",price:woo_aci_fc_obj.tax}]}};return woo_aci_fc_obj.is_not_cart_virtual_only&&woo_aci_fc_obj.available_shipping_methods.length>0&&(t.newShippingOptionParameters={defaultSelectedOptionId:woo_aci_fc_obj.default_method_id,shippingOptions:acifc.getGooglepayShippingMethods()}),t},acifc.update_paymentdata_request=function(o,e,a){return new Promise((function(i,n){const c=o.shippingOptionData||"",r=o.shippingAddress||"",_=o.couponCode||"";var s;t.post(woo_aci_fc_obj.ajax_url,{action:woo_aci_fc_obj.action,nonce:woo_aci_fc_obj.nonce,id:"woo_aci_fc_cart_update",shipping_address:r,shipping_option_data:c,brand:e,couponData:_}).done((function(o){var n={};woo_aci_fc_obj=o,o.error?"GOOGLEPAY"===e&&(n=acifc.get_gpay_paymentdata_error(o,"onDataChange")):"GOOGLEPAY"===e&&(n=acifc.get_gpay_new_paymentdata()),"APPLEPAY"===e&&(n=acifc.getApplePayNewPaymentData(a,o.error));const c=t(woo_aci_fc_obj.cart_totals_html).find(".shop_table.shop_table_responsive").html();t(".cart_totals .shop_table.shop_table_responsive").html(c),s=n,i(n)})).fail((function(t,o,n){if(console.error("AJAX Request Failed:",o,n),"APPLEPAY"===e){var c=acifc.getApplePayNewPaymentData(a,!0);s=c,i(c)}})).then((function(){void 0!==s.status&&"ABORT"===s.status&&(location.href=woo_aci_fc_obj.cart_url)}))}))},acifc.handle_auth_response=function(t){return t.error?acifc.get_gpay_paymentdata_error(t,"authResp"):"SUCCESS"===t.result?{transactionState:"SUCCESS"}:{transactionState:"ERROR",error:{reason:"PAYMENT_DATA_INVALID",message:"Custom merchant message",intent:"PAYMENT_AUTHORIZATION"}}},acifc.update_order=function(o,e,a){return new Promise((function(i,n){const c=o.shippingOptionData||"",r=o.shippingAddress,_=o.billingAddress||{},s=o.email||"",d=o.paymentMethodData.info.billingAddress.phoneNumber||"";var p;t.post(woo_aci_fc_obj.ajax_url,{action:woo_aci_fc_obj.action,nonce:woo_aci_fc_obj.nonce,id:"woo_aci_fc_order_update",shipping_address:r,shipping_option_data:c,billingAddress:_,email:s,phone:d,brand:e}).done((function(t){var o;"GOOGLEPAY"===e?o=acifc.handle_auth_response(t):"APPLEPAY"===e&&(o=acifc.getApplePayNewPaymentData(a,t.error)),p=o,i(o)})).fail((function(t,o,n){var c;if("APPLEPAY"===e){var r=acifc.getApplePayNewPaymentData(a,!0);p=r,i(r)}else"GOOGLEPAY"===e&&(c={transactionState:"ERROR",error:{reason:"OTHER_ERROR",message:"We are currently unable to process your payment. Please try again",intent:"PAYMENT_AUTHORIZATION"}});p=c,i(c)})).then((function(){void 0!==p.status&&"ABORT"===p.status&&(location.href=woo_aci_fc_obj.cart_url)}))}))},acifc.init_fc_widget=function(){if(acifc.unload_fc_script(),acifc.load_fc_script(),"object"!=typeof o.wpwlOptions&&(o.wpwlOptions={}),woo_aci_fc_obj.custom_js_code){new Function("window",`\n\t\t\t\t${woo_aci_fc_obj.custom_js_code}\n\t\t\t\t`)(o)}woo_aci_fc_obj.gpay_enabled&&(o.wpwlOptions.googlePay=Object.assign({buttonColor:"white",buttonType:"pay",buttonSizeMode:"fill",gatewayMerchantId:woo_aci_fc_obj.entity_id,merchantId:woo_aci_fc_obj.entity_id,currencyCode:woo_aci_fc_obj.currency,amount:woo_aci_fc_obj.total,displayItems:[{label:"Subtotal",type:"SUBTOTAL",price:woo_aci_fc_obj.subtotal},{label:"Tax",type:"TAX",price:woo_aci_fc_obj.tax}],onPaymentDataChanged:function(t){return new Promise((function(o,e){acifc.update_paymentdata_request(t,"GOOGLEPAY").then((function(t){o(t)}))}))},emailRequired:!0,billingAddressRequired:!0,shippingOptionRequired:!!woo_aci_fc_obj.is_not_cart_virtual_only,billingAddressParameters:{format:"FULL",phoneNumberRequired:!0},onPaymentAuthorized:function(t){return new Promise((function(o,e){acifc.update_order(t,"GOOGLEPAY").then((function(t){o(t)}))}))}},o.wpwlOptions.googlePay||{}),Array.isArray(woo_aci_fc_obj.available_shipping_methods)&&woo_aci_fc_obj.available_shipping_methods.length>0&&woo_aci_fc_obj.is_not_cart_virtual_only&&(o.wpwlOptions.googlePay.shippingOptionParameters={defaultSelectedOptionId:woo_aci_fc_obj.default_method_id,shippingOptions:acifc.getGooglepayShippingMethods()})),woo_aci_fc_obj.applepay_enabled&&(o.wpwlOptions.applePay=Object.assign({total:acifc.getApplePayTotal(),currencyCode:woo_aci_fc_obj.currency,requiredShippingContactFields:["postalAddress","email","name","phone"],shippingContact:acifc.getApplePayshippingContact(),requiredBillingContactFields:["postalAddress"],billingContact:acifc.getApplePayBillingContact(),shippingMethods:acifc.getApplepayShippingMethods(),lineItems:acifc.getApplePayLineItem(),supportsCouponCode:!0,onPaymentMethodSelected:function(t){return new Promise((function(t,o){acifc.update_paymentdata_request({},"APPLEPAY","onPaymentMethodSelected").then((function(o){t(o)}))}))},onCouponCodeChanged:function(t){return new Promise((function(o,e){var a={couponCode:t};acifc.update_paymentdata_request(a,"APPLEPAY","onCouponCodeChanged").then((function(t){o(t)}))}))},onShippingContactSelected:function(t){return new Promise((function(o,e){var a={shippingAddress:{first_name:t.givenName,last_name:t.familyName,city:t.locality,administrativeArea:t.administrativeArea,postalCode:t.postalCode,countryCode:t.countryCode}};acifc.update_paymentdata_request(a,"APPLEPAY","onShippingContactSelected").then((function(t){o(t)}))}))},onShippingMethodSelected:async function(t){return new Promise((function(o,e){var a={shippingOptionData:{id:t.identifier}};acifc.update_paymentdata_request(a,"APPLEPAY","onShippingMethodSelected").then((function(t){o(t)}))}))},onPaymentAuthorized:function(t){return new Promise((function(o,e){var a=acifc.getOrderData(t);acifc.update_order(a,"APPLEPAY","onPaymentAuthorized").then((function(t){o(t)}))}))},onCancel:function(){console.log("onCancel")}},o.wpwlOptions.applePay||{})),o.wpwlOptions.checkout={amount:woo_aci_fc_obj.total},o.wpwlOptions.createCheckout=function(o){return t.post(woo_aci_fc_obj.ajax_url,{action:woo_aci_fc_obj.action,nonce:woo_aci_fc_obj.nonce,id:"woo_aci_fc",brand:o.brand}).then((function(t){return JSON.parse(t).id}))}},acifc.getApplePayNewPaymentData=function(t,o){var e={};if(o)e.status="ABORT";else{if("onPaymentAuthorized"===t)return e.status="SUCCESS",e;e.newTotal=acifc.getApplePayTotal(),e.newLineItems=acifc.getApplePayLineItem(),"onShippingContactSelected"===t&&(e.newShippingContact=acifc.getApplePayshippingContact(),e.newShippingMethods=acifc.getApplepayShippingMethods())}return e},acifc.getShippingAmountByIdentifier=function(){var t=woo_aci_fc_obj.default_method_id,o="0.00",e=woo_aci_fc_obj.available_shipping_methods.find((function(o){return o.identifier===t}));return e&&(o=e.amount),o},acifc.getApplePayLineItem=function(){return[{label:"Subtotal",amount:woo_aci_fc_obj.subtotal_ap},{label:"Shipping",amount:acifc.getShippingAmountByIdentifier()},{label:"Discount",amount:woo_aci_fc_obj.discount},{label:"Tax",amount:woo_aci_fc_obj.tax}]},acifc.getApplepayShippingMethods=function(){var t=[];return woo_aci_fc_obj.available_shipping_methods.length>0&&(t=woo_aci_fc_obj.available_shipping_methods.map((function(t){return{label:t.label,amount:t.amount,identifier:t.identifier,detail:t.detail}})),woo_aci_fc_obj.default_method_id&&(t=t.sort(((t,o)=>t.identifier===woo_aci_fc_obj.default_method_id?-1:o.identifier===woo_aci_fc_obj.default_method_id?1:0)))),t},acifc.getGooglepayShippingMethods=function(){var t=[];return woo_aci_fc_obj.available_shipping_methods.length>0&&(t=woo_aci_fc_obj.available_shipping_methods.map((function(t){return{id:t.id,label:t.label,description:t.description}}))),t},acifc.getApplePayTotal=function(){return{label:"Pay With Apple Pay",amount:woo_aci_fc_obj.total}},acifc.getApplePayshippingContact=function(){var t=woo_aci_fc_obj.shipping_address;return{addressLines:[t.address_1,t.address_2],locality:t.city,administrativeArea:t.state,postalCode:t.postcode,countryCode:t.country,givenName:t.first_name,familyName:t.last_name,phoneNumber:t.phone,emailAddress:t.email}},acifc.getApplePayBillingContact=function(){var t=woo_aci_fc_obj.shipping_address;return{addressLines:[t.address_1,t.address_2],locality:t.city,administrativeArea:t.state,postalCode:t.postcode,countryCode:t.country,givenName:t.first_name,familyName:t.last_name}},acifc.getOrderData=function(t){var o=t.shippingContact,e=t.billingContact;return{billingAddress:{address1:e.addressLines[0],address2:e.addressLines[1],locality:e.locality,administrativeArea:e.administrativeArea,postalCode:e.postalCode,countryCode:e.countryCode,first_name:e.givenName,last_name:e.familyName,phone:o.phoneNumber,email:o.emailAddress,name:""},shippingAddress:{address1:o.addressLines[0],address2:o.addressLines[1],locality:o.locality,administrativeArea:o.administrativeArea,postalCode:o.postalCode,countryCode:o.countryCode,first_name:o.givenName,last_name:o.familyName,name:""},shippingOptionData:{id:woo_aci_fc_obj.default_method_id},email:"",paymentMethodData:{info:{billingAddress:{phoneNumber:""}}}}},t(document).ready((function(){acifc.init()}))}(jQuery,window);