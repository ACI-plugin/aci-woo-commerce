!function(t){function e(){const e=woo_aci_apm_admin_config_obj.existing_data,n={status:0,title:"",payment_action:"authorize",payment_key:""};this.bind_wc_backbone_modal_response_event(),e?t.each(e,function(t,e){this.apm_add_settings(t,e)}.bind(this)):this.apm_add_settings(1,n),t("#add_apm").click(function(){let a=1;t("[data-index]").each((function(){a=Math.max(a,parseFloat(t(this).attr("data-index")))})),e&&t.each(e,(function(t,e){a=Math.max(a,parseFloat(t))}));const i=a+1;this.apm_add_settings(i,n)}.bind(this)),t(document.body).on("click","#remove_apm",function(e){this.apm_element_index="",this.apm_element_index=t(e.currentTarget).attr("data-index"),t(this).WCBackboneModal({template:"wc-apm-modal"})}.bind(this)),t(document.body).on("change",".required-dependent",function(e){const n=Number(t(e.currentTarget).val()),a=t(e.currentTarget).closest(".apm-payment"),i=t(a).find(t(".required-field"));this.manage_validation(n,i)}.bind(this))}e.prototype.manage_validation=function(e,n){1===e?t.each(n,(function(e,n){t(n).prop("required",!0)})):t.each(n,(function(e,n){t(n).prop("required",!1)}))},e.prototype.bind_wc_backbone_modal_response_event=function(){t(document.body).on("wc_backbone_modal_response",this.bind_wc_backbone_modal_response_event_handler.bind(this))},e.prototype.bind_wc_backbone_modal_response_event_handler=function(e,n){"wc-apm-modal"===n&&t("#apm-payment-index-"+this.apm_element_index).remove()},e.prototype.apm_add_settings=function(e,n){const a=this.apm_create_settings_elements(e,n);t("#"+woo_aci_apm_admin_config_obj.settings_id).append(a);const i=t("#apm-payment-index-"+e),o=Number(t(i).find(t(".required-dependent")).val()),s=t(i).find(t(".required-field"));o||s.each((function(e,n){t(n).prop("required",!1)})),this.init_tiptip()},e.prototype.apm_create_settings_elements=function(t,e){const n=void 0===e.title?"":e.title,a=void 0===e.payment_key?"":e.payment_key,i=woo_aci_apm_admin_config_obj.settings_id;let o="";return e.logo_link&&(o=`<div><img src="${e.logo_link}" style="width: 120px; padding-top:10px;"/></div>`),`<div class="apm-payment" style="position: relative; border: 1px solid #000000; padding: 25px; margin-bottom: 20px;" id="apm-payment-index-${t}">\n            <table class="form-table">\n\t\t\t\t<tr valign="top">\n\t\t\t\t\t<th scope="row" class="titledesc" style="width: 20%;">\n\t\t\t\t\t\t<label>${wp.i18n.__("Enabled","woocommerce")}</label>\n\t\t\t\t\t</th>\n\t\t\t\t\t<td class="forminp">\n\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t<legend class="screen-reader-text"><span>${wp.i18n.__("Enabled","woocommerce")}</span></legend>\n\t\t\t\t\t\t\t<select class="select required-dependent" style="width: 100%;" name="${i}[${t}][status]">\n\t\t\t\t\t\t\t\t<option value="0" ${0===Number(e.status)?"selected":""}>${wp.i18n.__("No","woocommerce")}</option>\n\t\t\t\t\t\t\t\t<option value="1" ${1===Number(e.status)?"selected":""}>${wp.i18n.__("Yes","woocommerce")}</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr valign="top">\n\t\t\t\t\t<th scope="row" class="titledesc">\n\t\t\t\t\t\t<label>${wp.i18n.__("Title","woocommerce")}</label>\n\t\t\t\t\t</th>\n\t\t\t\t\t<td class="forminp">\n\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t<legend class="screen-reader-text"><span>${wp.i18n.__("Title","woocommerce")}</span></legend>\n\t\t\t\t\t\t\t<input type="text" class="input-text regular-input required-field" value="${n}" style="width: 100%;" name="${i}[${t}][title]" required maxlength="100"/>\n\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr valign="top">\n\t\t\t\t\t<th scope="row" class="titledesc">\n\t\t\t\t\t\t<label>${wp.i18n.__("Charge Type","woocommerce")}</label>\n\t\t\t\t\t</th>\n\t\t\t\t\t<td class="forminp">\n\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t<legend class="screen-reader-text"><span>${wp.i18n.__("Charge Type","woocommerce")}</span></legend>\n\t\t\t\t\t\t\t<select class="select" style="width: 100%;" name="${i}[${t}][payment_action]">\n\t\t\t\t\t\t\t\t<option value="authorize" ${"authorize"===e.payment_action?"selected":""}>${wp.i18n.__("Authorization","woocommerce")}</option>\n\t\t\t\t\t\t\t\t<option value="capture" ${"capture"===e.payment_action?"selected":""}>${wp.i18n.__("Sale","woocommerce")}</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr valign="top">\n\t\t\t\t\t<th scope="row" class="titledesc">\n\t\t\t\t\t\t<label>${wp.i18n.__("APM Icon","woocommerce")}<span class="woocommerce-help-tip" tabindex="0" aria-label="${wp.i18n.__("APM Icon maximum size allowed is 100 KB and supported file types are JPG, JPEG, and PNG.","woocommerce")}" data-tip="${wp.i18n.__("APM Icon maximum size allowed is 100 KB and supported file types are JPG, JPEG, and PNG.","woocommerce")}"></span></label>\n\t\t\t\t\t</th>\n\t\t\t\t\t<td class="forminp">\n\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t<legend class="screen-reader-text"><span>${wp.i18n.__("APM Icon","woocommerce")}</span></legend>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<input type="file" accept=".jpg, .jpeg, .png" name="${i}[${t}]"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t${o}\n\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr valign="top">\n\t\t\t\t\t<th scope="row" class="titledesc">\n\t\t\t\t\t\t<label>${wp.i18n.__("Payment Key","woocommerce")}<span class="woocommerce-help-tip" tabindex="0" aria-label="${wp.i18n.__("Name of brand to be used for Copy and Pay widget.","woocommerce")}" data-tip="${wp.i18n.__("Name of brand to be used for Copy and Pay widget.","woocommerce")}"></span></label>\n\t\t\t\t\t</th>\n\t\t\t\t\t<td class="forminp">\n\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t<legend class="screen-reader-text"><span>${wp.i18n.__("Payment Key","woocommerce")}</span></legend>\n\t\t\t\t\t\t\t<input type="text" class="input-text regular-input required-field" style="width: 100%;" value="${a}" name="${i}[${t}][payment_key]" required maxlength="100"/>\n\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n            </table>\n            <div id="remove_apm" class="dashicons dashicons-trash" style="cursor: pointer; position: absolute; right: 4px; top: 4px;" data-index="${t}"></div>\n        </div>`},e.prototype.init_tiptip=function(){t(".woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200,keepAlive:!0})},t(document).ready((function(){new e}))}(jQuery);